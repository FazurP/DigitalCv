@model AppDigitalCv.ViewModels.DireccionVM

@{
    ViewBag.Title = "Create";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@using (Html.BeginForm())
{ 
    @Html.AntiForgeryToken()

<div class="bs-container">

    <div class="row">

        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">

            <div class="box box-primary">

                <div class="box-header with-border">
                    <h3 class="box-title">Registrar Dirección</h3>
                </div>

                <div role="form">

                    <div class="box-body">

                        <div class="form-group">
                            <label for="etCalle">Calle:</label>
                            <br />
                            <input class="form-control" />
                        </div>

                        <div class="col-md-6 form-group">
                            <div class="form-group">
                                <label for="etNoInterior">No° Interior:</label>
                                <br />
                                <input class="form-control" />
                            </div>
                        </div>

                        <div class="col-md-6 form-group">
                            <div class="form-group">
                                <label for="etNoExterior">No° Exterior:</label>
                                <br />
                                <input class="form-control" />
                            </div>
                        </div>

                        <div class="col-md-6 form-group">
                            <div class="form-group ">
                                <label>Colonia</label>
                                <select class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true"></select>
                                <span class="select2 select2-container select2-container--default select2-container--below" dir="ltr" style="width: 100%;">
                                    <span class="selection">
                                        <span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-n38d-container">
                                            <span class="select2-selection__rendered" id="select2-n38d-container" title="hola">hola</span><span class="select2-selection__arrow" role="presentation">
                                                <b role="presentation"></b>
                                            </span>
                                        </span>
                                    </span><span class="dropdown-wrapper" aria-hidden="true"></span>
                                </span>
                            </div>
                        </div>

                        <div class="col-md-6 form-group">
                            <div class="form-group">
                                <label for="etNoExterior">Codigo Postal:</label>
                                <br />
                                <input class="form-control" />
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="form-group ">
                                <label>Municipio</label>
                                <select class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true"></select>
                                <span class="select2 select2-container select2-container--default select2-container--below" dir="ltr" style="width: 100%;">
                                    <span class="selection">
                                        <span class="select2-selection select2-selection--single" role="combobox" aria-haspopup="true" aria-expanded="false" tabindex="0" aria-labelledby="select2-n38d-container">
                                            <span class="select2-selection__rendered" id="select2-n38d-container" title="hola">hola</span><span class="select2-selection__arrow" role="presentation">
                                                <b role="presentation"></b>
                                            </span>
                                        </span>
                                    </span><span class="dropdown-wrapper" aria-hidden="true"></span>
                                </span>
                            </div>
                        </div>

                        <!-- Aqui se llena el dropdownloist de estados y se ponen algunas validaciones -->
                        <div class="form-group">
                            <div class="form-group ">
                                <label>Estado</label>
                                @Html.DropDownList("Estados", null, htmlAttributes: new { @class = "form-control input-sm", id = "Estados" })
                                @Html.ValidationMessageFor(model => model.IdEstado, "", new { @class = "text-danger" })
                            </div>
                        </div>

                        <!-- Aqui se llena el dropdownlist de paises y se ponen algunas validaciones -->
                        <div class="form-group">
                            <div class="form-group ">
                                <label>País</label>
                                @Html.DropDownList("Pais", null, htmlAttributes: new { @class = "form-control input-sm", id = "Pais" })
                                @Html.ValidationMessageFor(model => model.IdPais, "", new { @class = "text-danger" })
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

}

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#Pais").change(function () {
                var paisId = $(this).val();
                debugger;
                $.ajax({
                    type: "Post",
                    url: "/Direccion/ConsultarEstadosByPais?idPais=" + paisId,
                    contentType: "html",
                    success: function (response) {
                        $("#Estados").empty();
                        $("#Estados").append(response);
                    },
                    error: function (error) {

                    }
                });
            });
        });

    </script>